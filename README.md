# Завершимость

Рассмотрим систему переписывания с правилами:
- $aaa → bab$
- $bbb → aaa$

Назовём буквы $b$, порождённые первым правилом, **синтетическими**.

---

**Лемма.** Три синтетические $b$ никогда не стоят подряд в слове.

**Доказательство.**  
Пусть у нас в некоторый момент появились синтетические $b_{synt}$:

$$aaa → b_{synt} a b_{synt}$$

Заметим, что буква a между ними не может превратиться в $b_{synt}$, не удалив одну из соседних $b_{synt}$.  
Действительно, единственный способ превратить a в $b_{synt}$ (да и в принципе в $b$) — это правило $aaa → bab$, для применения которого нужны три подряд идущие $a$. Чтобы получить такую тройку, необходимо сначала заменить одну из $b_{synt}$ на $a$, а это возможно только через правило $bbb → aaa$, для случая когда $bb$ стоит справа:

$$b_{synt} a b_{synt} b b → b_{synt} a a a a → b_{synt} b_{synt} a b_{synt} a$$

Как видно правая $b_{synt}$ исчезает, аналогично для случая, когда bb слева. Следовательно, три синтетические $b$ подряд возникнуть не могут.

---

Из леммы следует, что в левой части правила $bbb → aaa$ всегда присутствует хотя бы одна **обычная** $b$. Значит, при каждом применении этого правила количество обычных $b$ уменьшается как минимум на $1$.

Рассмотрим меру:

$$\mu = 4 \times (количество\ обычных \ b) + (количество\ a) $$

Поведение меры при применении правил:

| Правило | $\Delta (количество\ обычных\ b)$ | $\Delta (количество\ a)$ | $\Delta \mu$ |
|---------|-------------------|------------|-----|
| $aaa → bab$ | $0$ | $-2$ | $-2$ |
| $bbb → aaa$ | $≤ -1$ | $+3$ | $≤ -1$ |

В обоих случаях $\mu$ строго убывает, а так как $\mu$ принимает только неотрицательные целые значения, любая цепочка редукций конечна. Следовательно, система **завершима**.

---
# Локальная конфлюэнтность
Система не локально конфлюентна.

**Пример:**

$$
\begin{array}{c}
\text{aaaa} \\
\swarrow \qquad \searrow \\
\text{baba} \quad \neq \quad \text{abab}
\end{array}
$$

# Пополнимость по Кнуту-Бендиксу
Исходные правила не меняют длину слова $\implies$ при пополнении новые правила тоже не будут менять длину слов. Пусть эта система пополнима, тогда у нее конечное число добавленных правил, пусть длина правил  $≤ k$.
Рассмотрим строку $a ^ {k+3}$

$$
\begin{array}{c}
a^{k+3} \\
\swarrow \qquad \searrow \\
\text{bab } a^{k} \quad \quad a^{k} \text{ bab} \\
\downarrow \qquad \qquad \downarrow \\
\vdots \qquad \qquad \vdots \\
\downarrow \qquad \qquad \downarrow \\
\text{bab}A^k \quad \neq \quad A^k\text{bab}
\end{array}
$$

$babA^k \neq A^kbab$ , потому что если они равны, то $A^k$ = $babX$ , тогда $(bab)^2X = babXbab$ $\dots$ $(bab)^{n}Y$ = $(bab)^{n-1}Ybab$ этот процесс можно продолжать бесконечно, чего не может быть.

Получается, что придется добавить новое правило, длины $k+3$.

**Противоречие.**
Система **не** пополнима по КБ.

Для тестирования, система была частично пополнена до правил:
- $aaa → bab$
- $bbb → aaa$
- $baba → abab$
- $bbab → babb$
- $babba → ababb$
- $bbaabab → abaabab$
- $baababb → ababbab$
- $bbabbabbab → ababbabbab$

# Конечность

Заметим, что правила не меняют длину слова, тогда нормальные формы вида $(ba)^k$ лежат в разных классах эквивалентности, поэтому классов бесконечно много.

# Тестирование
Для мета-тестирования были выбраны инварианты:

- Длина слова
- Четность разности $(количество\ a) - (количество\ b)$
- $((количество\ b) - 2\times(количество\ a)) \mod3$
  

